<app-menu></app-menu>

<app-toast [show]="toastShow" [message]="toastMessage"></app-toast>

<div class="page-wrapper">
  <div class="container">

    <div class="card">
      <div class="card-title">
        <h2>MEUS DADOS</h2>
      </div>

      <form [formGroup]="perfilForm" (ngSubmit)="onSubmit()" class="card-body">

        <div class="grid">

          <!-- USERNAME -->
          <div class="form-group with-icon">
            <label>USERNAME</label>
            <input readonly class="blocked" formControlName="username" />
            <span class="icon">üîí</span>
          </div>

          <!-- CPF -->
          <div class="form-group with-icon">
            <label>CPF</label>
            <input readonly class="blocked" formControlName="cpf" />
            <span class="icon">üîí</span>
          </div>

          <!-- NOME COMPLETO -->
          <div class="form-group with-icon">
            <label>NOME COMPLETO</label>
            <input readonly class="blocked" formControlName="nome" />
            <span class="icon">üîí</span>
          </div>

          <!-- DATA DE NASCIMENTO -->
          <div class="form-group with-icon">
            <label>DATA DE NASCIMENTO</label>
            <input readonly class="blocked" formControlName="nascimento" />
            <span class="icon">üîí</span>
          </div>

          <!-- EMAIL -->
          <div class="form-group full with-icon">
            <label>EMAIL</label>
            <input formControlName="email"
                   [readonly]="!edit.email"
                   class="{{ edit.email ? '' : 'blocked' }}"
                   (focus)="ativarEdicao('email')" />
            <span class="icon">{{ edit.email ? '‚úîÔ∏è' : '‚úèÔ∏è' }}</span>
          </div>

          <!-- TELEFONE -->
          <div class="form-group full with-icon">
            <label>TELEFONE</label>
            <input formControlName="telefone"
                   (input)="onPhoneInput($event)"
                   [readonly]="!edit.telefone"
                   class="{{ edit.telefone ? '' : 'blocked' }}"
                   (focus)="ativarEdicao('telefone')" />
            <span class="icon">{{ edit.telefone ? '‚úîÔ∏è' : '‚úèÔ∏è' }}</span>
          </div>

          <!-- ENDERE√áO -->
          <div class="form-group with-icon">
            <label>ENDERE√áO</label>
            <input formControlName="endereco"
                  [readonly]="!edit.endereco"
                  class="{{ edit.endereco ? '' : 'blocked' }}"
                  (focus)="ativarEdicao('endereco')" />
            <span class="icon">{{ edit.endereco ? '‚úîÔ∏è' : '‚úèÔ∏è' }}</span>
          </div>

          <!-- CEP -->
          <div class="form-group with-icon">
            <label>CEP</label>
            <input formControlName="cep"
                   (input)="onCEPInput($event)"
                   [readonly]="!edit.cep"
                   class="{{ edit.cep ? '' : 'blocked' }}"
                   (focus)="ativarEdicao('cep')" />
            <span class="icon">{{ edit.cep ? '‚úîÔ∏è' : '‚úèÔ∏è' }}</span>
          </div>

          <!-- SENHA -->
          <div class="form-group full with-icon">
            <label>NOVA SENHA</label>
            <input type="password"
                  formControlName="senha"
                  [readonly]="!edit.senha"
                  class="{{ edit.senha ? '' : 'blocked' }}"
                  (focus)="ativarEdicao('senha')" />
            <span class="icon">{{ edit.senha ? '‚úîÔ∏è' : '‚úèÔ∏è' }}</span>
          </div>

          <!-- üî• Valida√ß√µes din√¢micas da senha -->
          <div class="password-rules" *ngIf="edit.senha">
            <div class="rule" *ngFor="let rule of passwordRules" [class.valid]="rule.check()">
              <span class="icon">{{ rule.check() ? "‚úî" : "‚úñ" }}</span>
              <span class="text">{{ rule.label }}</span>
            </div>
          </div>


          <!-- CONFIRMAR SENHA -->
          <div class="form-group full" *ngIf="edit.senha">
            <label>CONFIRMAR SENHA</label>
            <input type="password" formControlName="confirmarSenha" />
            <small *ngIf="perfilForm.errors?.['senhaMismatch']" style="color:#FF8080;">
              As senhas n√£o coincidem.
            </small>
          </div>

        </div>

        <div class="button-container">
          <button class="btn-salvar" type="submit">SALVAR</button>
        </div>

      </form>

    </div>

  </div>
</div>
