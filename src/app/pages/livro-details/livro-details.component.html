<app-menu></app-menu>
<main class="page-wrapper" *ngIf="!loading(); else loadingTpl">
  <section class="book-section">
    <div class="left">
      <img [src]="book().cover" alt="Capa do livro" class="cover" />
    </div>

    <div class="right">
      <h1 class="book-title">{{ book().title }}</h1>

      <div class="rating">
        @for (i of [].constructor(5); track i) {
          <span class="star" [class.filled]="i < book().rating">★</span>
        }
      </div>

      <p><strong>Autor(a):</strong> {{ book().author }}</p>
      <p><strong>Editora:</strong> {{ book().publisher }}</p>
      <p><strong>Tema:</strong> {{ book().theme }}</p>

      <p><strong>Descrição:</strong></p>
      <p class="description">
        {{ truncatedDescription() }}
        @if (book().description.length > 450) {
          <a (click)="toggleDescription()" class="read-more">
            {{ showFullDescription() ? 'Ler menos' : 'Ler mais' }}
          </a>
        }
      </p>

      <p class="stock">Quantidades restantes: {{ book().stock }}</p>

      <button class="btn-obter">OBTER LIVRO</button>
    </div>
  </section>
</main>

<ng-template #loadingTpl>
  <p style="color:white;text-align:center;">Carregando detalhes do livro...</p>
</ng-template>
